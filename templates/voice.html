<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Assistance - AgroVision</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Slab:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS VARIABLES (Consistent) --- */
        :root {
            --primary: #2ecc71;
            --primary-dark: #27ae60;
            --secondary: #2c3e50;
            --accent: #9b59b6;
            --text-dark: #2d3436;
            --text-light: #636e72;
            --bg-light: #f9fbfd;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
            --radius: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-light); color: var(--text-dark); padding-bottom: 80px; }

        /* --- UTILS --- */
        .container { max-width: 1100px; margin: 0 auto; padding: 0 1.5rem; }
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 24px; border-radius: 50px; font-weight: 600; text-decoration: none; transition: 0.3s; border: none; cursor: pointer; }
        .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(46, 204, 113, 0.4); }
        .btn-primary:hover { transform: translateY(-3px); background: var(--primary-dark); }
        .icon-lg { font-size: 2.5rem; margin-bottom: 1rem; }

        /* --- NAVBAR --- */
        .navbar { background: white; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #eee; padding: 1rem 0; }
        .nav-container { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; }
        .nav-logo a { font-family: 'Roboto Slab', serif; font-size: 1.5rem; font-weight: 700; color: var(--primary-dark); text-decoration: none; }
        .nav-menu { display: flex; gap: 2rem; list-style: none; }
        .nav-menu a { text-decoration: none; color: var(--text-dark); font-weight: 500; }
        .nav-menu a.active { color: var(--primary); font-weight: 700; }

        /* --- HERO SECTION --- */
        .voice-hero {
            background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%);
            color: white; padding: 4rem 1.5rem; text-align: center;
            border-radius: 0 0 50% 50% / 20px; margin-bottom: 3rem;
        }
        .voice-hero h1 { font-family: 'Roboto Slab', serif; font-size: 2.5rem; margin-bottom: 1rem; }
        
        /* --- HELPLINE CARD --- */
        .helpline-card {
            background: white; max-width: 600px; margin: -50px auto 3rem;
            padding: 2rem; border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            text-align: center; position: relative; border: 1px solid rgba(0,0,0,0.05);
        }
        .pulse-ring {
            position: absolute; width: 100px; height: 100px; background: rgba(46, 204, 113, 0.2);
            border-radius: 50%; top: -20px; left: 50%; transform: translateX(-50%);
            z-index: 0; animation: pulse 2s infinite;
        }
        .phone-icon-wrapper {
            width: 60px; height: 60px; background: var(--primary); color: white;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; margin: -50px auto 1rem; position: relative; z-index: 1;
        }
        .phone-display {
            font-size: 2.5rem; font-weight: 800; color: var(--text-dark);
            margin: 1rem 0; letter-spacing: 1px;
        }
        @keyframes pulse { 0% { transform: translateX(-50%) scale(0.8); opacity: 1; } 100% { transform: translateX(-50%) scale(1.5); opacity: 0; } }

        /* --- DEMO SIMULATOR --- */
        .demo-section { background: #fff; padding: 3rem 1.5rem; border-radius: var(--radius); box-shadow: var(--shadow); margin-bottom: 3rem; display: flex; gap: 2rem; align-items: center; }
        .demo-text { flex: 1; }
        .phone-mockup {
            flex: 0 0 300px; background: #333; border-radius: 30px; padding: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2); border: 4px solid #555;
        }
        .screen {
            background: #f0f2f5; height: 400px; border-radius: 20px; overflow: hidden;
            display: flex; flex-direction: column;
        }
        .screen-header { background: var(--primary); color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; }
        .chat-area { flex: 1; padding: 15px; display: flex; flex-direction: column; gap: 10px; overflow-y: auto; }
        .msg { padding: 10px 15px; border-radius: 15px; max-width: 80%; font-size: 0.9rem; line-height: 1.4; }
        .msg-bot { background: white; align-self: flex-start; border-bottom-left-radius: 2px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .msg-user { background: var(--secondary); color: white; align-self: flex-end; border-bottom-right-radius: 2px; }
        .screen-footer { padding: 10px; background: white; text-align: center; border-top: 1px solid #eee; }
        .audio-wave { display: flex; gap: 3px; justify-content: center; height: 20px; align-items: center; }
        .bar { width: 4px; background: var(--primary); animation: wave 1s infinite ease-in-out; }
        .bar:nth-child(2) { animation-delay: 0.1s; }
        .bar:nth-child(3) { animation-delay: 0.2s; }
        @keyframes wave { 0%, 100% { height: 5px; } 50% { height: 20px; } }

        /* --- TIMELINE --- */
        .timeline { position: relative; max-width: 800px; margin: 0 auto 3rem; }
        .timeline::before {
            content: ''; position: absolute; left: 24px; top: 0; bottom: 0;
            width: 2px; background: #e0e0e0;
        }
        .timeline-item { display: flex; gap: 2rem; margin-bottom: 2rem; position: relative; }
        .timeline-marker {
            width: 50px; height: 50px; background: white; border: 2px solid var(--primary);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: bold; color: var(--primary); z-index: 1; flex-shrink: 0;
        }
        .timeline-content {
            background: white; padding: 1.5rem; border-radius: 12px; box-shadow: var(--shadow); flex: 1;
            transition: 0.3s;
        }
        .timeline-content:hover { transform: translateX(5px); border-left: 4px solid var(--primary); }

        /* --- GRID --- */
        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 3rem; }
        .card { background: white; padding: 1.5rem; border-radius: 12px; box-shadow: var(--shadow); text-align: center; }
        
        /* --- LANGUAGES --- */
        .lang-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .lang-badge {
            background: white; border: 1px solid #eee; padding: 8px 16px;
            border-radius: 20px; font-weight: 500; color: #555;
        }

        /* --- MOBILE NAV --- */
        .mobile-bottom-nav { display: none; position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid #eee; z-index: 999; padding: 10px 0; }
        .mobile-bottom-nav ul { display: flex; justify-content: space-around; list-style: none; }
        .mobile-bottom-nav a { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: #999; font-size: 0.75rem; }
        .mobile-bottom-nav a.active { color: var(--primary); }

        @media (max-width: 768px) {
            .nav-menu { display: none; }
            .mobile-bottom-nav { display: block; }
            .demo-section { flex-direction: column; }
            .phone-mockup { width: 100%; max-width: 320px; }
            .voice-hero { border-radius: 0; padding-bottom: 5rem; }
            .helpline-card { margin-top: -60px; width: 90%; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="/">üåæ <span data-lang="appName">AgroVision</span></a>
            </div>
            <ul class="nav-menu">
                <li><a href="/" data-lang="navHome">Home</a></li>
                <li><a href="/detect" data-lang="navDetect">Detect Disease</a></li>
                <li><a href="/schemes" data-lang="navSchemes">Govt Schemes</a></li>
                <li><a href="/voice" class="active" data-lang="navVoice">Voice Help</a></li>
                <li><a href="/chatbot">ü§ñ Chatbot</a></li>
            </ul>
            <select id="languageSelect" onchange="changeLanguage(this.value)" style="padding: 8px; border-radius: 6px; border: 1px solid #ddd; cursor: pointer;">
                <option value="en">English</option>
                <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
            </select>
        </div>
    </nav>

    <header class="voice-hero">
        <div class="container">
            <h1 data-lang="voiceTitle">üé§ Voice Assistance</h1>
            <p data-lang="voiceSubtitle">No Smartphone? No Internet? No Problem.</p>
        </div>
    </header>

    <main class="container">
        
        <div class="helpline-card">
            <div class="pulse-ring"></div>
            <div class="phone-icon-wrapper">üìû</div>
            <h2 data-lang="tollFreeTitle">Toll-Free Helpline</h2>
            <div class="phone-display"><a href="tel:18001234567" style="color:inherit; text-decoration:none;">1800-123-4567</a></div>
            <p style="color: #666; margin-bottom: 1.5rem;" data-lang="helplineAvailability">Available 24/7 ‚Ä¢ Multi-lingual Support</p>
            <a href="tel:18001234567" class="btn btn-primary" style="width: 100%; max-width: 250px;" data-lang="tapToCall">
                Tap to Call Now
            </a>
        </div>

        <section class="demo-section">
            <div class="demo-text">
                <h2 style="margin-bottom: 1rem;" data-lang="ivrExperience">Experience the IVR System</h2>
                <p style="line-height: 1.6; color: #555; margin-bottom: 1.5rem;" data-lang="ivrDescription">
                    Not sure how it works? Try our interactive simulator. 
                    Our smart voice bot guides you through the process step-by-step in your local language.
                </p>
                <button onclick="startDemo()" class="btn btn-primary" id="demoBtn" data-lang="playDemo">‚ñ∂Ô∏è Play Demo</button>
            </div>
            <div class="phone-mockup">
                <div class="screen">
                    <div class="screen-header">
                        <span>AgroVision Support</span>
                        <span>00:00</span>
                    </div>
                    <div class="chat-area" id="chatArea">
                        <div class="msg msg-bot" data-lang="welcomeMsg">Hello! Welcome to AgroVision helpline.</div>
                        <div style="text-align: center; color: #999; font-size: 0.8rem; margin-top: auto;" id="statusText" data-lang="tapPlayDemo">Tap 'Play Demo'</div>
                    </div>
                    <div class="screen-footer">
                        <div class="audio-wave" id="audioWave" style="opacity: 0;">
                            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <h2 style="text-align: center; margin-bottom: 2rem;" data-lang="howIvrWorks">How It Works</h2>
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-marker">1</div>
                <div class="timeline-content">
                    <h3 data-lang="ivrStep1Title">Dial the Number</h3>
                    <p style="color:#666; margin-top: 5px;" data-lang="ivrStep1Desc">Call 1800-123-4567 from any landline or mobile phone. No internet required.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-marker">2</div>
                <div class="timeline-content">
                    <h3 data-lang="ivrStep2Title">Select Language</h3>
                    <p style="color:#666; margin-top: 5px;" data-lang="ivrStep2Desc">"Press 1 for English, 2 for Hindi, 3 for Telugu..." Choose your comfortable language.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-marker">3</div>
                <div class="timeline-content">
                    <h3 data-lang="ivrStep3Title">Describe Symptoms</h3>
                    <p style="color:#666; margin-top: 5px;" data-lang="ivrStep3Desc">Speak clearly about the crop issue (e.g., "Brown spots on rice leaves").</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-marker">4</div>
                <div class="timeline-content">
                    <h3 data-lang="ivrStep4Title">Get Solution</h3>
                    <p style="color:#666; margin-top: 5px;" data-lang="ivrStep4Desc">Our AI identifies the problem and dictates the remedy instantly.</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-marker">5</div>
                <div class="timeline-content">
                    <h3 data-lang="ivrStep5Title">SMS Confirmation</h3>
                    <p style="color:#666; margin-top: 5px;" data-lang="ivrStep5Desc">You will receive an SMS with the medicine name and dosage instructions.</p>
                </div>
            </div>
        </div>

        <h2 style="text-align: center; margin-bottom: 2rem;" data-lang="servicesOffered">Services Offered</h2>
        <div class="grid-3">
            <div class="card">
                <div class="icon-lg">üçÉ</div>
                <h3 data-lang="serviceDiseaseTitle">Disease Diagnosis</h3>
                <p style="color:#666;" data-lang="serviceDiseaseDesc">Identify crop diseases by describing symptoms.</p>
            </div>
            <div class="card">
                <div class="icon-lg">üèõÔ∏è</div>
                <h3 data-lang="serviceSchemeTitle">Scheme Info</h3>
                <p style="color:#666;" data-lang="serviceSchemeDesc">Get details on latest government subsidies.</p>
            </div>
            <div class="card">
                <div class="icon-lg">üå¶Ô∏è</div>
                <h3 data-lang="serviceWeatherTitle">Weather Alert</h3>
                <p style="color:#666;" data-lang="serviceWeatherDesc">Get 3-day forecast warnings for your area.</p>
            </div>
        </div>

        <div style="text-align: center; margin-bottom: 4rem;">
            <h3 data-lang="supportedLanguages">Supported Languages</h3>
            <div class="lang-grid" style="margin-top: 1rem;">
                <span class="lang-badge">English</span>
                <span class="lang-badge">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</span>
                <span class="lang-badge">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</span>
                <span class="lang-badge">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</span>
                <span class="lang-badge">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</span>
                <span class="lang-badge">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</span>
            </div>
        </div>

    </main>

    <nav class="mobile-bottom-nav">
        <ul>
            <li><a href="/"><span style="font-size:1.4rem">üè†</span><span data-lang="navHome">Home</span></a></li>
            <li><a href="/detect"><span style="font-size:1.4rem">üì∏</span><span data-lang="navDetect">Detect</span></a></li>
            <li><a href="/schemes"><span style="font-size:1.4rem">üèõÔ∏è</span><span data-lang="navSchemes">Schemes</span></a></li>
            <li><a href="/voice" class="active"><span style="font-size:1.4rem">üé§</span><span data-lang="navVoice">Help</span></a></li>
        </ul>
    </nav>

    <footer style="text-align: center; padding: 2rem; color: #888; background: white; border-top: 1px solid #eee;">
        <p data-lang="footerCopyright">&copy; 2026 AgroVision. All rights reserved.</p>
    </footer>

    <script>
        // IVR Simulator Logic
        const chatArea = document.getElementById('chatArea');
        const audioWave = document.getElementById('audioWave');
        const statusText = document.getElementById('statusText');
        const demoBtn = document.getElementById('demoBtn');
        let isPlaying = false;

        async function startDemo() {
            if (isPlaying) return;
            isPlaying = true;
            demoBtn.disabled = true;
            chatArea.innerHTML = '';
            statusText.style.display = 'none';

            // Sequence of interaction
            await botSpeak("Welcome to AgroVision. Press 1 for English.");
            await delay(1000);
            await userAction("1");
            await botSpeak("Please describe your crop problem after the beep.");
            await delay(1000);
            await userAction("My rice leaves have yellow spots.");
            await botSpeak("Analyzing... It sounds like 'Brown Spot'. Apply Mancozeb spray.");
            await botSpeak("Sending details via SMS. Thank you!");
            
            isPlaying = false;
            demoBtn.disabled = false;
            demoBtn.textContent = "‚Ü∫ Replay Demo";
        }

        function botSpeak(text) {
            return new Promise(resolve => {
                audioWave.style.opacity = 1; // Show wave
                
                // Add message to UI
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = 'msg msg-bot';
                    div.textContent = text;
                    chatArea.appendChild(div);
                    chatArea.scrollTop = chatArea.scrollHeight;
                    
                    // Basic Speech Synthesis (Optional, remove if annoying)
                    if('speechSynthesis' in window) {
                        const utter = new SpeechSynthesisUtterance(text);
                        window.speechSynthesis.speak(utter);
                    }
                    
                    audioWave.style.opacity = 0; // Hide wave
                    resolve();
                }, 1500);
            });
        }

        function userAction(text) {
            return new Promise(resolve => {
                const div = document.createElement('div');
                div.className = 'msg msg-user';
                div.textContent = text;
                chatArea.appendChild(div);
                chatArea.scrollTop = chatArea.scrollHeight;
                setTimeout(resolve, 800);
            });
        }

        function delay(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
    
    <!-- Language Translation Module -->
    <script src="/static/js/lang.js"></script>
    
    <!-- Chatbot Widget -->
    <script src="/static/js/chatbot.js"></script>
</body>
</html>